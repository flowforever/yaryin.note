/*! avril-front - v0.0.5 - 2015-03-17 */!function(){function isLambda(a){return a&&"string"==typeof a&&a.indexOf("=>")>0}String.prototype.toUnicode=function(){return escape(this).replace(/\%/g,"\\")},String.prototype.endWidth=function(a,b){if(b){var c=this.toLower(),d=a.toLower();return-1!==c.indexOf(d,c.length-d.length)}return-1!==this.indexOf(a,this.length-a.length)},String.prototype.beginWidth=function(a,b){if(b){var c=this.toLower(),d=a.toLower();return 0==c.indexOf(d)}return 0==this.indexOf(a)},String.prototype.replaceAll=function(a,b){var c=new RegExp(a,"gi");return this.replace(c,b)},String.prototype.equals=function(a,b){return void 0==b&&(b=!0),void 0!=a&&null!=a?this==a||this.toLower()==a.toLower():this==a},String.prototype.trim=function(){var a=/(^\s*)|(\s*$)/g;return this.replace(a,"")},String.prototype.trimAll=function(){var a=/\s*/g;return this.replace(a,"")},String.prototype.uperChar0=function(){var a=this,b=a.charAt(0),c=b.toUpperCase();return a.replace(new RegExp("^"+b),c)},String.prototype.lowerChar0=function(){var a=this,b=a.charAt(0),c=b.toLowerCase();return a.replace(new RegExp("^"+b),c)},String.prototype.toLower=String.prototype.toLowerCase,String.prototype.toUpper=String.prototype.toUpperCase,String.prototype.ellipsis=function(a,b){var c=this.toString();if(c.length<=a)return c;b=b||3;for(var d=c.substr(0,a-b),e=0;b>e;e++)d+=".";return d},String.prototype.lambda=function(ctx){var str=this;if(isLambda(str)){var lambdaKey=str.indexOf("=>"),args=str.substring(0,lambdaKey),funcContent=str.substring(lambdaKey+2),funcStr="function";if(funcStr+=args.indexOf("(")<0?" ("+args+")":args,funcStr+=funcContent.indexOf("{")>=0&&funcContent.indexOf(";")>=0?funcContent:"{ return "+funcContent+"; }",ctx)with(ctx)return eval("("+funcStr+")");return eval("("+funcStr+")")}},Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e})}(),function(window){return window.avril&&avril.avril?avril:(function(){var a=(window.avril,{});a.avril="avril",a.$=jQuery;var b=function(c){("function"==typeof c||"object"==typeof c)&&(c.extend=function(d,e){if(d)if(e)"string"==typeof d&&(c[d]=e);else if("function"==typeof d||"object"==typeof d){for(var f in d)c[f]=d[f],b(c[f]);d.ready&&"function"==typeof d.ready&&a.ready(function(){d.ready.call(d)})}})};a.isValueType=function(a){return null==a||"number,boolean,string,undefined".split(",").indexOf(typeof a)>=0},a.isFunc=function(a){return"function"==typeof a},a.isObj=function(a){return"object"==typeof a},a.isArray=function(a){return a instanceof Array},a.isStr=function(a){return"string"==typeof a},a.helper={encode:function(a){return $("<div/>").html(a).text()},decode:function(a){return $("<div/>").text(a).html()},encodeReg:function(a){var b="~!@#$%^&*()/\\|[].".split("");return a.split("").select(function(a){return b.indexOf(a)>=0?"\\"+a:a}).join("")}},a.namespace=function(a,c){function d(a,c){if(a.indexOf(".")>0){var e=a.substring(0,a.indexOf("."));return c[e]||(c[e]=new Object,b(c[e])),d(a.substring(a.indexOf(".")+1),c[e])}return c[a]?void 0:(c[a]=new Object,b(c[a]),c[a])}if(a&&"string"==typeof a)return d(a,c||window);throw" typeof(spaceName) must be string!"},a.module=function(b,c,d){2==arguments.length&&(d=c,c=[]),"string"==typeof c&&(c=c.trimAll().split(","));var e=a.module.getModuleEvent,f=a.array(c).where(function(b){return!a.object(window).getVal(b)}).value(),g=0,h=function(g){if(i(),g==f.length){a.namespace(b);var h=a.object(window).getVal(b),j=c.select(function(b){return a.object(window).getVal(b)});d.apply(h,j),e(b)([name])}},i=function(){var d=a.array(f).where(function(b){return!a.object(window).getVal(b)}).value(),e=a.array(c).where(function(b){return!!a.object(window).getVal(b)}).value();console.log(0==d.length?b+" dependences loaded complete.":b+" dependences loaded "+e.join(",")+", waiting: "+d.join(","))};f.length>0&&a.array(f).each(function(a){e(a)(function(){h(++g)})}),h(0)},a.module.getModuleEvent=function(b){return a.event.get("module.events."+b)},a.module.notify=function(b,c){a.module.getModuleEvent(b)([b,c])},a.module.subscribe=function(b,c){a.module.getModuleEvent(b)(c)},a.extend=function(c,d){var c=arguments[0],d=arguments[1];if(c)if(d){if("string"==typeof c)a[c]=d,b(a[c]);else if("object"==typeof c||"function"==typeof c)for(var e in d)c[e]=d[e]}else if("object"==typeof c||"function"==typeof c)for(var e in c)a[e]=c[e],b(a[e]);return a};var c={maxDeep:5,isValueType:function(a){return null==a||"number,boolean,string,undefined".split(",").indexOf(typeof a)>=0},getVal:function(b,c){var d=this._getExecPropArr(c),e=this._getPropFromExecArr,f=b;return a.array(d).each(function(a){var b=e(a);return f=f[b],f?void 0:!1}),f},setVal:function(b,c,d){var e=this._getExecPropArr(c),f=this._getPropFromExecArr,g=b;return a.array(e).each(function(b,c){var h=f(b);if(c===e.length-1)return g[h]=d,!1;if(!a.isObj(g[h])){var i=e[c+1];g[h]=i[1]?[]:{}}g=g[h]}),b},_getPropFromExecArr:function(b){return a.array(b).first(function(a,b){return b>0&&a})},_getExecPropArr:function(a){for(var b,c=/\[\s*(\d+)\s*\]|\[\s*\'(.+)?\'\s*\]|\[\s*\"(.+)?\"\s*\]|\.?((\w|\$)+)/g,d=[];b=c.exec(a);)d.push(b);return d},beautifyNames:function(b,c,d){var e=this;if(a.isArray(b)){for(var f=[],g=0;g<b.length;g++){var h=b[g];(a.isObj(h)||a.isArray(h))&&(h=e.beautifyNames(h,c+1,d)),f.push(h)}return f}if(a.isObj(b)){var i={};return c=void 0==c||isNaN(c)?0:c,c>this.maxDeep?i:(void 0==d&&(d=!0),this.each(b,function(b,f){e.isValueType(f)?i[b]=f:a.isObj(f)?a.isStr(b)&&d?i[b.lowerChar0()]=a.object.beautifyNames(f,c+1,d):i[b]=a.object.beautifyNames(f,c+1,d):a.isStr(b)&&d?i[b.lowerChar0()]=f:i[b]=f}),i)}},deepClone:function(a,b){return this.beautifyNames(a,b,!1)},each:function(b,c){if(!a.isFunc(c))return!1;if(a.isArray(b)){for(var d=0;d<b.length;d++)if(0==c(d,b[d]))return!1}else for(var e in b)if(0==c(e,b[e]))return!1},keys:function(a){var b=[];return this.each(a,function(a){b.push(a)}),b},values:function(a){var b=[];return this.each(a,function(a,c){b.push(c)}),b},tryGetVal:function(a,b){var c=void 0;try{c=this.getVal(a,b)}catch(d){}return c},instanceOf:function(a,b){return a instanceof b},keyValues:function(a){var b=[];return this.each(a,function(a,c){b.push({key:a,value:c})}),b},toArray:function(a){if(!a)return[];if(a instanceof Array)return a;var b=[];if(a.length)for(var c=0;c<a.length;c++)b.push(a[c]);return b}};a.object=function(b){var c={getVal:function(c){return a.object.getVal(b,c)},setVal:function(c,d){return a.object.setVal(b,c,d)},each:function(c){a.object.each(b,c)},keys:function(){return a.object.keys(b)},values:function(){return a.object.values(b)},beautifyNames:function(){return a.object.beautifyNames(b)},deepClone:function(c){return a.object.deepClone(b,c)},tryGetVal:function(c){var d=void 0;try{d=a.object.getVal(b,c)}catch(e){}return d},instanceOf:function(c){return a.object.instanceOf(b,c)},keyValues:function(){return a.object.keyValues(b)},toArray:function(){return a.object.toArray(b)}};return c},$.extend(a.object,c);var d={};a.data=function(b,c){if("string"!=typeof b&&(b=a.getHash(b).toLowerCase()),1==arguments.length){try{var e=a.object.getVal(d,b);return e}catch(f){}return null}if(2==arguments.length)a.object.setVal(d,b,c);else if(0==arguments.length)return d},a.guid=function(){return Math.random().toString(32).replace(".","_")+(new Date).getTime().toString(32)};var e=function(){var b=0;return function(c){if(null===c)return"null";if("string"==typeof c)return c;var d=typeof c;return"object"!==d?d:c.___hash___||(c.___hash___=a.guid()+"__"+b++)}}();a.getHash=e;var f=!1;a._single=function(){f||(a.getHash=top.avril?top.avril.getHash:e),f=!0},window.avril=a}(),function(a,b){function c(a,b){var b=b||f+"["+g+"].",c=b+a;return e._event[c]||e.register(c),e._event[c]}function d(a,d,e){var f=f||"before",g=g||"on",i=a,j=i[d],k=h(f,d),l=h(g,d);if("function"!=typeof i[d]||"function"==typeof i[d][k]||"function"==typeof i[d][l])return i;var m=c(k,e),n=c(l,e);i[d]=function(){var a=this;if(m(a,arguments)){var b=j.apply(a,arguments),c=[];c.push(b);for(var d=0;d<arguments.length;d++)c.push(arguments[d]);return n(a,c),b}return!1},i[d]._orgFunc=j,i[d][k]=m,i[d][l]=n;for(var o in j)i[d][o]=b.isFunc(j[o])?j[o].bind(j):j[o];return i}if(b.event)return!0;var e=b.event={},f=b.guid(),g=0,h=function(){var a=[];if(!arguments.length)return"";for(var b=0;b<arguments.length;b++)a.push(arguments[b]);a[0]&&(a[0]=a[0].lowerChar0());for(var b=1;b<arguments.length;b++)a[b]=a[b].uperChar0();return a.join("")};e._event={eventList:{},add:function(a,b,c,d){b=b||"default",this.eventList[b]||(this.eventList[b]=[]);var e={func:a,data:c,ctx:d};this.eventList[b].push(e)},execute:function(a,c,d){var e=this;a=a||"default",this.eventList[a]=this.eventList[a]||[],c=c||b.event._event;var f=!0,g=[];return b.array(this.eventList[a]).each(function(a){var b,e=a.ctx||c;if(d&&d.length>=0){for(var h=[],i=0;i<d.length;i++)h.push(d[i]);a.data&&h.push(a.data),f=f&&!(0==(b=a.func.apply(e,h)))}else f=f&&!(0==(b=a.func.call(e,d,a.data)));"removeThis"===b&&g.push(a)}),b.array(g).each(function(c){b.array(e.eventList[a]).removeElement(c)}),f},clear:function(a){this.eventList[a]=[]}},e.events=e._event.eventList,e.register=function(a,c){if(e._event[a])return e._event[a];var d=function(d,e,f){return"function"!=typeof d?(e=e||d,c=c||e,b.event._event.execute(a,c,e)):void b.event._event.add(d,a,e,f||c)};return d.remove=function(a){return this.eventList().remove(a)},d.clear=function(){e._event.clear(a)},d.eventList=function(){return e._event.eventList[a]},d.execList=function(){},e._event[a]=d,d},e.registerOn=function(a,c,d){var e=b.getHash(a)+"_"+c;return this.register(e,d)},e.remove=function(a){e._event[a]&&delete e._event[a]},e.clear=function(a){e._event.clear(a)},e.hook=function(a,c,e){e=e||b.getHash(a),c.split(",").each(function(b){b&&d(a,b,e)})},e.unhook=function(a,b){a[b]&&a[b]._orgFunc&&(a[b]=a[b]._orgFunc)},e.get=function(a,b){if(b||(b=window),b.jquery)return b.each(function(){e.registerOn(this,a,this,this)}),function(){var c=arguments,d=!0;return b.each(function(){d=d&&e.registerOn(this,a,this,this).apply(this,c)}),d};var c=this.registerOn(b,a,b,b);return c}}(avril.$,avril),function(){var isFunc=function(a){return"function"==typeof a},isLambda=function(a){return a&&"string"==typeof a&&a.indexOf("=>")>0},parseFuncLambda=function(a){return isFunc(a)?a:isLambda(a)?toLambdaFunc(a):function(){}},toLambdaFunc=function(str,ctx){if(isLambda(str)){var lambdaKey=str.indexOf("=>"),args=str.substring(0,lambdaKey),funcContent=str.substring(lambdaKey+2),funcStr="function";if(funcStr+=args.indexOf("(")<0?" ("+args+")":args,funcStr+=funcContent.indexOf("{")>=0&&funcContent.indexOf(";")>=0?funcContent:"{ return "+funcContent+"; }",ctx)with(ctx)return eval("("+funcStr+")");return eval("("+funcStr+")")}},sort=function(a,b,c){return c=c||1,a.sort(function(a,d){return b?a[b]>d[b]?c:-1*c:a>d?c:-1*c})},avArray=function(a){var b=this;b.asc=function(a){return sort(this,a,1)},b.desc=function(a){return sort(this,a,-1)},b.each=function(b){b=parseFuncLambda(b);for(var c=0;c<a.length&&b(a[c],c)!==!1;c++);return this},b.where=function(b){b=parseFuncLambda(b);var c=[];return this.each(function(a,d){b(a,d)&&c.push(a)}),a=c,this},b.first=function(b){return b=parseFuncLambda(b),0==a.length?null:b?this.where(b).value()[0]:a[0]},b.last=function(b){return b=parseFuncLambda(b),0==a.length?null:isFunc(b)?this.where(b).value()[0]:a[this.length-1]},b.groupBy=function(a){if(a=parseFuncLambda(a)){var b={};return this.each(function(c,d){var e=a(c,d)+"";b[e]||(b[e]=[]),b[e].push(c)}),b}return this},b.take=function(b){for(var c=[],d=0;b>d;d++)c.push(a[d]);return a=c,this},b.skip=function(b){for(var c=[],d=b;d<a.length;d++)c.push(this[d]);return a=c,this},b.select=function(b){b=parseFuncLambda(b);var c=[];return this.each(function(a,d){c.push(b.call(a,a,d))}),a=c,this},b.remove=function(b){b=parseFuncLambda(b);var c=[];this.each(function(a,d){b(a,d)&&c.push(d)}),c=c.reverse();for(var d=0;d<c.length;d++)a.splice(c[d],1);return this},b.removeElement=function(a){return this.remove(function(b){return b==a})},b.removeAt=function(a){return this.remove(function(b,c){return c==a})},b.indexOf=function(a){var b=-1;return this.each(function(c,d){return c==a?(b=d,!1):void 0}),b},b.contain=function(a,b){return 1!=b&&"function"==typeof a?this.where(a).length>0:this.indexOf(a)>=0},b.distinc=function(b){return a=[],this.each(function(c,d){isFunc(b)&&0!=b(c,d)?a.push(c):isFunc(b)||a.contain(c)||a.push(c)}),this},b.clone=function(){for(var b=[],c=0;c<this.length;c++)b.push(this[c]);return a=b,this},b.value=function(){return a}};avril.array=function(a){return new avArray(a)}}(),function(a){if(a.createlib)return a.createlib;var b={uperChar0:function(a){var b=a.charAt(0),c=b.toUpperCase();return a.replace(new RegExp("^"+b),c)},lowerChar0:function(a){var b=a.charAt(0),c=b.toLowerCase();return a.replace(new RegExp("^"+b),c)}},c=0,d=function(){var a=[];if(!arguments.length)return"";for(var c=0;c<arguments.length;c++)a.push(arguments[c]);a[0]&&(a[0]=b.lowerChar0(a[0]));for(var c=1;c<arguments.length;c++)a[c]=b.uperChar0(a[c]);return a.join("")},e={},f=function(b,f,g,h,i){if(i=i||window,a.object(i).tryGetVal(b))return a.object(i).tryGetVal(b);a.object(i).setVal(b,function(g){function j(a,b,c){var d=b[a],e=c[a];if(d!=e){var f=s([a,b,c]);f&&(c[a]=b[a],r([a,b,c]))}}function k(e,f){a.event.hook(e,f,b+"["+c+"].");var g=g||"before",h=h||"on",i=d(g,f),j=d(h,f);return e.events[i]=e[f][i],e.events[j]=e[f][j],e}function l(a,b){if(!a)return!1;var c=b.events;for(var d in a)c[d]&&"function"==typeof a[d]&&(1==a.clearAllEvents&&c[d].clear(),c[d](a[d]))}c++;var m=a.object(i).getVal(b);if(!(this instanceof m))return new m(g);var n=this;if(h){a.isStr(h)&&(h=a.object(i).getVal(h));var o=h(g);a.object(o).each(function(a,b){n[a]=b}),n._getSuper=function(){return o}}else{n._getSuper=function(){return null},n.events={};var p=a.guid(),q=e[p]={},r=a.event.register(b+"["+c+"].onPropertyChange"),s=a.event.register(b+"["+c+"].beforePropertyChange");l(g,n),n.options=function(a,b){if(arguments.length>0){if("object"==typeof a)for(var c in a)j(c,a,q);else if("string"==typeof a){var c=a,a={};a[c]=b,j(c,a,q)}return l(a,this),this}return q},n.events.beforeOptionChange=s,n.events.onOptionChange=r,n.hook=function(b){var c=this;return"string"==typeof b&&(b.indexOf(",")>=0?a.array(b.split(",")).each(function(a){k(c,a)}):k(c,b)),c},n._prop=function(b,c,d){a.createlib.getset(n,b,c,d)},n._parseConfig=function(b){a.createlib.parseConfig(n,b)}}"function"==typeof f&&(f.call(this,g),l(g,this))});var j=a.object(i).getVal(b);$.extend(j,g);var k=j.toString;j.toString=function(a){return a?k.call(j):"type [ "+b+" ] "},j.toJQ=function(a,b){var c=a;a+="API",$.fn[c]=function(c){{var d=arguments;this.each(function(){var d=$(this);if(d.data(a))var e=d.data(a);else{var f={};"function"==typeof b?b.call(d,f):"string"==typeof b&&(f[b]=d);var e=new j($.extend({},c,f));d.data(a,e),"function"==typeof e.init&&e.init()}})}if(0!=this.length&&this.data(a)){var e=this.data(a);if(1==d.length){if("string"==typeof d[0])return e[d[0]]}else if(d.length>1&&"string"==typeof d[0]&&e[d[0]]){if("function"==typeof e[d[0]]){for(var f=[],g=1;g<d.length;g++)f.push(d[g]);return e[d[0]].apply(e,f)}e[d[0]]}}return this}};var l=b.replace(new RegExp("\\.","gi"),"_");return $.fn[l]||($.fn[l]=function(a){return this.each(function(){var c=$(this),d=$.extend({$:c},a),e=j(d);c.data(b,e)}),this}),j},g=function(b,c,d,e,f){var g=a.createlib(c,d,e,b,f);return g};a.createlib=f,a.createlib.getset=function(b,c,d,e){b[c]=function(b,c,d,e){var f={value:void 0};return function(){return 0==arguments.length?a.isFunc(d)?d.call(f,f.value):f.value:(a.isFunc(e)?e.call(f,arguments[0]):f.value=arguments[0],b)}}(b,c,d,e)},a.createlib.parseConfig=function(b,c){a.object(b.options()).each(function(d){if(0==d.indexOf("$")&&!b[d]){var e,f=a.guid();a.createlib.getset(b,d,function(){return f!=b.options()[d]&&(f=b.options()[d],e=(c||$)(b.options()[d])),e},function(a){b.options(d,a)})}})},a.createlibOn=function(b,c,d,e,f){return a.createlib(c,d,e,f,b)},a.extendlib=g,a.createlib.beautifyFunName=d,function(){a.object.instanceOf;a.object.instanceOf=function(b,c){var d=b instanceof c;if(d)return!0;if(a.isFunc(b._getSuper)){var e=b._getSuper();if(d=e instanceof c)return!0;if(null!=e)return a.object(e).instanceOf(c)}return d}}()}(avril),avril.execTime=function(a,b){var c=(new Date).getTime();a&&a();var d=(new Date).getTime()-c;return avril.execTime.funcTimes.push(d),b&&(avril.execTime.funcTimeMap[b]=d),d},avril.execTime.funcTimes=[],avril.execTime.funcTimeMap={},window.console||(window.console={},window.console.log=function(){}),void avril.array("log,warn,error".split(",")).each(function(a){avril[a]=function(){console[a]&&console[a].apply(console,arguments)}}))}(this),function($,avril){avril.namespace("avril.tools"),function(a){return a.request?!1:void(a.request=function(){function b(b){var c={};c.queryString=function(){if(b.indexOf("?")<0)return{};for(var a,c={},d=function(a){return decodeURIComponent(a.replace(/\+/g," "))},e=b.substring(b.indexOf("?")+1),f=/([^&=]+)=?([^&]*)/g;a=f.exec(e);)c[d(a[1])]=d(a[2]);return c}();var d=function(b,d){var e=!1;return a.object(c.queryString).each(function(a){b.toLower()==a.toLower()&&(e=!0,c.queryString[a]=d)}),e||(c.queryString[b]=d),c},e=function(b){var d;return a.object(c.queryString).each(function(a,c){b.toLower()==a.toLower()&&(d=c)}),d};return c.param=function(a,b){if(0==arguments.length)return this;if(1==arguments.length){if("string"==typeof a)return e(a);if("object"==typeof a)for(var c in a)d(c,a[c]);return this}return 2==arguments.length?d(a,b):void 0},c.getUrl=function(){var a=b.split("?")[0];a.indexOf("?")<0&&(a+="?");for(var d in c.queryString)null!=c.queryString[d]&&(a+=d+"="+encodeURI(c.queryString[d])+"&");return a.lastIndexOf("&")==a.length-1?a.substring(0,a.lastIndexOf("&")):a.lastIndexOf("?")==a.length-1?a.substring(0,a.lastIndexOf("?")):a},c.toString=function(){return this.getUrl()},c}return $.extend(b,b(window.location.href)),b}())}(avril),avril.namespace("avril.tools.loader"),avril.tools.loader.extend({jsonp:function(options){function removeScript(){function a(){try{(head?head[0]:document).removeChild(script)}catch(a){}try{delete window[jsonpcallback]}catch(a){}}"undefined"==typeof script.jsonp&&options.error(),setTimeout(function(){a()},5e3)}options.success=options.success||function(){},options.error=options.error||function(){};var jsonpcallback="avril_"+avril.guid();window[jsonpcallback]=function(){if(script.jsonp=!0,options.success){var obj=arguments[0];"string"==typeof obj&&(obj=eval("("+obj+")")),options.success(obj)}};var script=document.createElement("script");script.type="text/javascript",script.language="javascript",script.charset="utf-8",script.async=!0;var head=document.getElementsByTagName("head");head[0].appendChild(script),script.onload=script.onreadystatechange=function(){(-[1]||/loaded|complete/i.test(this.readyState))&&removeScript()},script.onerror=function(){removeScript()};var request=avril.request(options.url);options.data&&avril.object(options.data).each(function(a,b){"function"!=typeof b&&"object"!=typeof b&&request.param(a,encodeURIComponent(b))}),request.param(options.jsonp||"jsonpcallback",jsonpcallback),script.src=request.getUrl()},json:function(a){a.url&&0==a.url.indexOf("http")&&a.url.indexOf("http://"+document.location.host)<0&&a.url.indexOf("https://"+document.location.host)<0?this.jsonp(a):$.ajax(a)},loadScript:function(a,b){callbackCache.hasOwnProperty(a)?b():(loadingList.push(a),callbackCache[a]=b||function(){},1==loadingList.length&&this._loadScript())},loadStyle:function(a){var b=document.getElementsByTagName("head")||document.getElementById("body"),c=document.createElement("link");c.rel="Stylesheet",c.type="text/css",(b?b[0]:document).appendChild(c),c.href=a},template:function(a,b){var c=avril.tools.cache(a);c?b(cache):$.get(a,function(c){b(c),avril.tools.cache(a,c)})}}),avril.tools.cache=function(){var a=window.localStorage||{},b=function(b,c){switch(arguments.length){case 0:return a;case 1:return a[b];case 2:return a[b]=c}};return b.del=function(b){delete a[b]},b.delByPre=function(c){for(var d in a)0==d.indexOf(c)&&b.del(d)},b.list=function(a,c){function d(c){return c.save=function(){b.list(a,c)},c}switch(arguments.length){case 1:var e=[];if(b(a)){var c=$.parseJSON(b(a)).data;return d(c),c}return d(e);case 2:if(c instanceof Array)return b(a,$.toJSON({data:c})),d(c);var e=[c];return b(a,$.toJSON({data:e})),d(e)}},b.object=function(a,c){function d(c){return c=c||{},c.save=function(){return b.object(a,c),c},c}switch(arguments.length){case 1:return c=b(a),c?d($.parseJSON(c).data):d();case 2:return b(a,$.toJSON({data:c})),d(c)}},b.localStorage=!!window.localStorage,b}(),avril.tools.queue=function(){function a(a){this.name=a;var b=[],c=function(){var a=b[0];if(a){var d=a.fn;a.status||(a.status="doing",d(function(){a.status="done",b.shift(),c()}))}};this.func=function(a){b.push({fn:d(a)}),c()};var d=function(a){return a.length>0?a:function(b){a(),b()}}}var b={};return function(c){return c=c||(new Date).getTime(),b[c]||(b[c]=new a(c))}}()}($,avril),function(a){return a.validator?(avril.namespace("avril.validator"),function(){var b=a.validator.prototype.showLabel;a.validator.prototype.showLabel=function(a){var c=b.apply(this,arguments);return this.errorsFor(a).addClass("help-block"),c}}(),avril.validator.extend({parseForm:function(b){var c=this;return b=a(b),b.each(function(){a.data(this,"validator",null),a(this).validate(c.getValidObj(a(this)))}),this},getValidObj:function(b,c){var d=c,e=d&&d.errCls||"has-error",f=d&&d.errCls||"has-success";d||(d={rules:{},errorElement:"small",messages:{},success:function(b){a(b).parent().removeClass(e).addClass(f),b.remove(),b.addClass("help-block")},errorPlacement:function(b,c){a(c).after(b),b.addClass("help-block"),b.hide(),a(c).parent().removeClass(f).addClass(e)}});var g=this;return b.find("input,select,textarea").each(function(){g.parseInput(a(this),d)}),d},parseInput:function(a,b){var c=this,d=a.attr("name"),e=a[0],f=e.attributes,g=[],h="data-val-";if(d||a.attr("name",d="input-name-"+avril.getHash(a)),"true"===a.attr("data-val")&&a.is(":enabled")){b.rules[d]||(b.rules[d]={}),b.messages[d]||(b.messages[d]={});for(var i=0;i<f.length;i++)g.push(f[i]);{g.each(function(e){var f=e.name;if(e.name.indexOf(h)>=0){var i=c._getOrgAttrName(f.replace(h,""));if(i.indexOf("-")<0){var j=a.attr("data-val-msg-"+i)||a.attr(f);b.messages[d][i]=j,c._getRuleParam(a,f,i,g,b),b.rules[d][i]||(b.rules[d][i]=!0)}}})}}},_getOrgAttrName:function(a){var b={equalto:"equalTo",dateiso:"dateISO"};return b[a]||a},_getRuleParam:function(a,b,c,d,e){var f=a.attr("name"),g=this;d.each(function(d){0==d.name.indexOf(b)&&(e.rules[f][c]=g._paramAdapter[c]?g._paramAdapter[c](a.attr(d.name),a):a.attr(d.name))})},_paramAdapter:{required:function(){return!0},range:function(a){return a.split(",").select(function(){return Number(this)})},rangelength:function(a){return a.split(",").select(function(){return Number(this)})}}}),void a.each(["minlength","maxlength","min","max"],function(){avril.validator._paramAdapter[this]=function(){return Number(arguments[0])}})):!1}(jQuery),function(a,b,c){var d=avril.createlib("avril.Mvvm",function(b){var c=a.extend(this.options(),b,{guid:avril.guid()}),e=this,f=function(a){return a?(a instanceof jQuery&&(a=a[0]),"hs_"+avril.getHash(a)):a+""},g=function(){return f({})},h=this.binders={},i=function(){var a={};return function(b){return function(c,d){return c=f(c),1==arguments.length?a[b+"_"+c]:2==arguments.length?a[b+"_"+c]=d:void 0}}}(),j=i("expression_cache"),k=i("expression_cache"),l=i("inited_element_cache"),m=i("html_template_cache"),n=[],o=this.magics={global:{},binders:{}},p=function(a){function b(a){if(a){var b=a.nodeName;if(i.indexOf("["+b+"]")>=0){var e=b.replace(/\[|\]/g,"").replace(d.defaults.attr_pre+"-","");c[e]=h[e]}}}var c=k(a);if(c)return c;var f=a.attr(w("each-item-group-id"));if(f&&(c=k("group_"+f)))return c;c={};var g=a[0],i=e.selector.split(","),j=avril.object.toArray(g.attributes);return 0==j.length?(k("group_"+f,c),c):(avril.array(j).each(b),k("group_"+f,c),c)},q={$root:{},guid:avril.guid()},r=/^(true|false|null|undefined)$/,s=/(\$data|\$scope|\$root)(\[\".+?\"\]|\[\'.+?\'\]|\[\d+\]|\.(\w+\d*)+)+/g,t=function(){return/^((\[(\d+|\".+?\"|\'.+?\')\]|\w+\d*|\$)+(\.\w+\d*)*)+$/g},u=function(a,b){if(b=b||"",0==b.indexOf("$root"))return b;if(b=b.replace("$scope.",""),t().test(b)||(b=""),b===T("indexChange")&&(a=a.replace(/\[\d+\]$/,"")),b.indexOf("$parent")<0)return a+"."+b;for(var c=a.split(".");0==b.indexOf("$parent");)c.pop(),b=b.replace("$parent.","");var d=c.join(".");return d+(/\]$/.test(d)?"":".")+b},v=function(){var a={};return function(b,c){if(b=b.replace(/^\s+|\s+$/g,""),a[b])return c?avril.array(a[b]).each(c):a[b];var d,e=[],f=/\$index\(\s*\)/g;for(f.test(b)&&e.push(d=T("indexChange"));d=s.exec(b);)e.push(d[0]),c&&c(d[0]);return a[b]=e}}(),w=d.bindingName.bind(d),x=function(a){return w(a)+"-data"},y=function(b,c,d){var e=avril.object(q).tryGetVal(b),f={};if(e&&avril.isObj(e))if(avril.isArray(e))avril.array(e).each(function(a,b){f[b]=a}),f.length=e.length;else for(var g in e)f[g]=e[g];return a.extend(!0,f,o.global),d&&a.extend(!0,f,o.binders[d]),f.$root=q.$root,f.$ns=b,f.$el=c,f.$scope=e,f},z=function(b){return b=a(b),y(cb(b),b)},A=function(a,b){if(!a)return"";var c=a=a.trim();return r.test(a)?a:isNaN(a)?j(c)?j(c):(b&&h[b]&&h[b].expressionParser&&(a=h[b].expressionParser(a)),b&&n.binders&&n.binders[b]&&avril.array(n.binders[b]).each(function(b){a=b(a)}),avril.array(n).each(function(b){a=b(a)}),j(c,a),a):a},B=function(a,b,c){a=A(a,c);var e=cb(b),f=b.attr(w("each"))?y(cb(b.parent()),b,c):y(e,b,c);return d.executeExpression(a,f)},C=function(a,b,c){return function(){return B(b,a,c)}},D=function(){return"[av],"+avril.array(avril.object(h).keys()).select(function(a){return"["+d.defaults.attr_pre+"-"+a+"]"}).value().join(",")+",["+d.defaults.attr_pre+"-stop]"},E=function(a){return"["+w(a)+"]"},F=function(b,c){var e=a(b);if(!d.elementExists(e))return!0;var f="["+w("stop")+"]";return e.is(f)||e.parents(f).length?!0:l(e)&&!c?(M(e),!0):(l(e,!0),void(d.defaults.force_delay===!1||"false"===e.attr(w("delay"))?G(e):X(function(){d.elementExists(e)&&G(e)})))},G=function(){var a={},b=function(b){return a[f(b)]},c=function(b,c){a[b]=c},d=function(a,b,c){avril.array(S(a)).remove(function(a){return a&&a.data&&a.data.$el&&a.data.ns?a.data.$el.is(b)&&a.data.ns==c:!1})};return function(a){var e=p(a),f=cb(a);for(var g in e)!function(c){var g=a.attr(w(c)),h=H(g,a,c,f,b(a),d);e[c]&&e[c].init(a,C(a,g,c),{expression:g,ns:f,dependencies:h})}(g);c(a,f),O(a),M(a)}}(),H=function(b,c,f,g,h,i){var j=A(b),k=0,l=function(b,h){e.subscribe(b,function(b,e,g){return d.elementExists(c)?void((h||b!=e)&&I(c,a.extend(g,{dependencies:h,oldValue:e,newValue:b}),f)):(c.is(x("each-item")),"removeThis")},{binder:f,$el:c,ns:g}),d.devInfo(c,"watch-"+f+"-"+k++,b)};l(g);var m=$(g);for(m.pop();m.length>1;)l(m.join("")),m.pop();var n=v(j,function(a){if(a){var b=u("scope"!==f?g:cb(c.parent()),a);l(b,a),h&&i(u(h,a),c,h)}});return n},I=function(b,c,d){var e=a(b),f=p(e),g=e.attr(w(d));f[d].update(e,C(e,g,d),a.extend(!0,{},c,{expression:g,binder:d,ns:cb(e)}))},J=function(){return/{{((?:.|\n)+?)}}/g},K=J(),L=e.getAllTextNodes=function(b){var c=[],d=function(){var d=J();3==this.nodeType&&d.test(this.nodeValue)&&0===a(this).parentsUntil(b).filter(e.selector).length&&c.push(this)};return b.contents().each(d),b.find(":not("+e.selector+")").contents().each(d),c},M=function(a){var b=L(a);avril.array(b).each(function(b){N(a,b,b.nodeValue)})},N=function(a,b,c){function d(f){return c.replace(K,function(c,g){return f&&v(g,function(c){e.subscribe(e.resolveAbsNs(cb(a),c),function(){b.nodeValue=d()})}),C(a,g)()})}b.nodeValue=d(!0)},O=function(a){var b=a[0],c=avril.object.toArray(b.attributes),e=p(a),f=[d.defaults.attr_pre+"-stop",d.defaults.attr_pre+"-each-item",d.defaults.attr_pre+"-each-item-group-id"];avril.array(c).each(function(b){var c=b.nodeName.replace(d.defaults.attr_pre+"-","");0===b.nodeName.indexOf(d.defaults.attr_pre)&&!e[c]&&f.indexOf(b.nodeName)<0&&P(a,c,b.nodeValue)})},P=function(a,b,c){function f(g){return c.replace(K,function(c,h){return g&&v(h,function(c){e.subscribe(e.resolveAbsNs(cb(a),c),function(){return d.elementExists(a)?void a.attr(b,f()):"removeThis"})}),C(a,h)()})}a.attr(b,f(!0))},Q="ave_",R=function(){var a=[];for(var b in avril.event.events)0===b.indexOf(Q)&&a.push(b.replace(Q+"_",""));return a},S=function(a){return a=Z(a),avril.event.get(a,Q)},T=function(a){return"__$$__"+c.guid+"__$$__"+a},U=function(a,b){return a+"."+T(b)},V=function(a,b){return S(U(a,b))},W=function(a,b){var c=w(b)+"-css";a.addClass(c)},X=function(a){setTimeout(a,1)},Y=function(){var b=!1;return function(){if(b)return!0;b=!0;var c=d.defaults.attr_pre,e=avril.mvvm;a(document).on(d.defaults.trigger_events,e.selector,function(){var b=a(this);if(b.is(e.selector)&&b.is("input,textarea,select")&&b.attr(w("bind"))&&t().test(b.attr(w("bind")))){var c=e.getAbsNs(b);e.setVal(c,b.val(),b)}}),a("html").attr(c+"-scope","$root").addClass("av-mvvm")}}(),Z=function(a){return $(a).join("")},$=function(a){var b=avril.object._getExecPropArr(a);return avril.array(b).select(function(a){var b=avril.object._getPropFromExecArr(a);return a[1]?"["+b+"]":a[2]?"['"+b+"']":"['"+b+"']"}).value()},_={};this.selector=D(),this.addBinder=function(a,b,c){"function"==typeof b&&(b={init:b,update:b}),b.update||(b.update=function(){}),b.init||(b.init=function(){}),c=c||b.expressionParser,avril.isFunc(c)&&(c=c.bind(b)),h[a]={init:b.init.bind(b),update:b.update.bind(b),expressionParser:c,fn:b},this.selector=D()},this.addExpressionParser=function(a,b){b?(n.binders=n.binders||{},n.binders[b]=n.binders[b]||[],n.binders[b].push(a)):n.push(a)},this.addMagic=function(a,b,c){if(!a||0!=a.indexOf("$"))throw"Magic method's name should start with '$'";c?(o.binders[c]||(o.binders[c]={}),o.binders[c][a]=b):o.global[a]=b},this.module=function(a,b,c){if(0==arguments.length)return _;if(1==arguments.length){var d=avril.object(_).getVal(a);return d}return avril.createlibOn(_,a,b,null,c),this};var ab=function(a){!a.is("html")&&F(a),a.find(e.selector).each(function(){F(this)})}.bind(this);this.bindDom=function(b,c){Y();var e=a(b&&b!==document?b:"html");return c===!0?X(function(){ab(e)}):c===!1?ab(e):void(d.defaults.force_delay===!1||"false"===e.attr(w("delay"))?ab(e):X(function(){ab(e)}))},this.setVal=function(a,b,c,d){a=u("$root",a);var e=avril.object(q).tryGetVal(a);e!=b&&(b&&("string"!=typeof b||isNaN(b)||(b=Number(b))),avril.object(q).setVal(a,b),!d&&S(a)([b,e,{sourceElement:c,channel:a}]))},this.array=function(a,b){a=u("$root",a);var c=this.getVal(a);c instanceof Array||(c=[],this.setVal(a,c,b));var d=function(c,d){S(a+".length")([c,d,{sourceElement:b,channel:a}])},e=function(){h.indexChange([])},f={add:function(b){c.push(b),V(a,"add")([b,{guid:g()}]),d(c.length,c.length-1)},remove:function(a){this.removeAt(c.indexOf(a))},removeAt:function(b){var f=c[b];avril.array(c).removeAt(b),V(a,"remove")([f,b,{guid:g()}]),d(c.length,c.length-1),e()},concat:function(b){for(var e=0;e++;e<b.length)c.push(b[e]);V(a,"concat")([b,{guid:g()}]),d(c.length,c.length-b.length)}},h=function(){var c={},d=function(d){c[d]=function(){"function"==typeof arguments[0]?V(a,d)(arguments[0],{$el:b,ns:a}):V(a,d)(arguments[0])}};d("indexChange");for(var e in f)d(e);return c}();return f.events=h,f},this.getVal=function(a){return a=u("$root",a),avril.object(q).tryGetVal(a)},this.subscribe=function(a,b,c){var d=a.split(",");avril.array(d).each(function(f){var g={subscribes:d,subscribeStr:a,current:f,values:function(a){var b=avril.array(this.subscribes).select(function(a){return e.getVal(a)
}).value();return a&&a.apply(this,b),b}};S(f)(b,c,g)})};var bb=function(b){b=a(b);var c="each-scope",d=x(c),e=b.attr(w("each"));return e&&t().test(e)?e.replace(/^\$scope(\.)?/,""):b.data(d)};this.getNs=function(b){var c="",e=w("scope"),f=x("scope"),g=b.parents("["+e+"],["+w("each")+"]"),h=bb(b),i=function(a){return 0===a.indexOf("[")};return b.attr(e)&&(c=b.data(f)||b.attr(e)),h&&(c=h),0==c.indexOf("$root.")?c:(g.each(function(){var b,d=a(this),g=bb(d);return d.attr(e)&&(b=d.data(f)||d.attr(e)),g&&(b=g),b&&(c=b+(!i(c)&&c?".":"")+c),c.indexOf("$root")>=0?!1:void 0}),c=c.replace(/\.$/g,""),d.devInfo(b,"scope",c),b.data(w("ns"),c),c)},this.getElScope=z;var cb=this.getNs.bind(this);this.getAbsNs=function(a,b){var c=this.getNs(a),d=a.attr(w(b||"bind"));return u(c,d)},this.resolveAbsNs=u,this.getRootScope=function(){return a.extend(!0,{},q.$root)};var db=this.addBinder.bind(this),eb=this.addExpressionParser.bind(this),fb=this.addMagic.bind(this);db("scope",function(a,b,c){var d=c.expression;if(!t().test(d)){d=A(d);var e=B(d,a.parent());if("string"!=typeof e)throw avril.log("element",a),avril.log("expression",c.expression),new Error("invalid scope value.",a.selector+":"+a[0].outerHTML);var f=v(d),g=x("scope");if((f&&f.length||!a.data(g))&&e!==a.data(g))return a.data(g,e),cb(a,!0),F(a,!0),!1}}),db("module",function(a,b,c){function d(b){var d=e.module(b);if(!d)throw avril.log("binding element",a),avril.log("binding expression",c.expression),"Module ["+b+"] is not define";return d()}var f=c.expression,g=/^\s*[\[|\{](.|\n)*?[\]|\}]\s*$/,h=g.test(f);if(f=h?b():f.split(","),0!=f.length){var i=e.getNs(a);h?!function(){if(avril.isArray(f)){var a=f[0].trim(),b=f[1]||"module";e.setVal(u(i,b.trim()),d(a))}else if(avril.isObj(f))for(var b in f)e.setVal(u(i,b.trim()),d(f[b]))}():!function(){var a=f[0].trim(),b=f[1]||"module";e.setVal(u(i,b.trim()),d(a))}()}}),db("if",{init:function(a,b){b=b();var c=a.html();m(a,c),b||a.html("")},update:function(a,b){var c=m(a);b()?(a.html(c),e.bindDom(a)):a.html("")}}),db("visibleIf",{init:function(a,b){W(a,"visible-if"),h["if"].init(a,b),h.visible.init(a,b)},update:function(a,b){h["if"].update(a,b),h.visible.update(a,b)}}),db("bind",function(a,b,c){if(c.sourceElement&&a.is(c.sourceElement)&&a.is("input,select,textarea"))return!1;var d=b();a.is("input")?a.is(":checkbox")||a.is(":radio")?a.attr("checked",a.val()===d):a.val(d):a.is("textarea")||a.is("select")?a.val(d):a.attr(w("text"))||a.attr(w("html"))||a.text(d)}),db("each",{init:function(a,b,c){m(a)||(this.getTemplateSource(a).attr(w("stop"),"true"),m(a,a.html()),a.html(""));var d=t().test(c.expression);if(!d){var e="$root.av_"+g(),f=bb(a);if(!f)return a.data(x("each-scope"),e),F(a,!0),!1}this.renderItems(a,b),d&&this.subscribeArrayEvent(a,c)},update:function(a,b,c){return c.sourceElement&&a.is(c.sourceElement)?!1:(a.html(m(a)),void this.renderItems(a,b))},subscribeArrayEvent:function(a){var b=this,c=cb(a),d=e.array(c,a).events;d.add(function(){b.addItem(a,e.getVal(c))}),d.remove(function(c,d,e){b.removeItem(a,c,d,e)}),d.concat(function(){}),d.indexChange(function(){})},renderItems:function(a,b){var c=b();c&&c instanceof Array||(c=[]),e.setVal(cb(a),c,a),a.html(m(a)),a.data(w(this.itemTemplateDataName),null);var d=this,f="guid_"+avril.guid(),g="<i>"+f+"</i>",h=this.getStart(this.getTemplateSource(a)),i=avril.array(d.generateItem(a).attr(w("scope"),"[{scope}]").toArray()).select(function(a){return a.outerHTML}).value().join(""),j=avril.array(c).select(function(a,b){return i.replace(/\[\{scope\}\]/g,"["+b+"]")}).value().join("");h.after(g);var k=a[0].innerHTML;a[0].innerHTML=k.replace(g,j),e.bindDom(a,"false"!==a.attr(w("delay")))},getStart:function(a){return 1==a.length?a:a.last()},eachItemAttrName:w("each-item"),itemTemplateDataName:"av-each-item-template",getOrgSourceEl:function(a){var b=this.eachItemAttrName,c=a.children("["+b+"=true]");return 0==c.length&&(c=a.children().attr(b,"true")),c},getTemplateSource:function(b){function c(){a(this).attr(w("each-item-group-id"),f(this))}if(b.data(w(this.itemTemplateDataName)))return b.data(w(this.itemTemplateDataName));var d=this.getOrgSourceEl(b);return d.find(e.selector).each(c),c.call(d[0]),d.filter(e.selector).each(c),b.data(w(this.itemTemplateDataName),d),d.hide()},getLastEl:function(a){var b=this.eachItemAttrName,c=a.children("["+b+'="generated"]');return 0==c.length?this.getOrgSourceEl(a):1==c.length?c:c.last()},getItemByDataIndex:function(a,b){return a.children("["+this.eachItemAttrName+'="generated"][av-scope="['+b+']"]')},addItem:function(a,b){var c=this.getLastEl(a),d=this.generateItem(a);d.attr(w("scope"),"["+(b.length-1)+"]"),c.after(d),e.bindDom(d)},removeItem:function(b,c,d,e){var f=this.getItemByDataIndex(b,d),g=f.nextAll("["+this.eachItemAttrName+'="generated"][av-scope!="['+d+']"]'),h=Z(cb(b)),i=function(){var a=R();avril.array(a).each(function(a){if(0===a.indexOf(h)){var b=a.replace(h,""),c=/^\[(\d+)\]/.exec(b),e=c&&c[1];if(c&&void 0!==e&&(e=parseInt(e),e>=d)){var f=b.replace("["+e+"]","["+(e+1)+"]"),g=Q+"_"+h+f,i=Q+"_"+a,j=avril.event.events[g];j?avril.event.events[i]=j:delete avril.event.events[i]}}})},j=function(){g.each(function(){var b=a(this),c=/\[(\d+)\]/.exec(b.attr(w("scope")))[1]-1;b.attr(w("scope"),"["+c+"]")})};f.remove(),!e._eventAdjusted&&i(),e._eventAdjusted=!0,j()},generateItem:function(a){return this.getTemplateSource(a).clone().removeAttr(w("stop")).attr(this.eachItemAttrName,"generated").show()}}),db("text",function(a,b){a.text(b())}),db("html",function(a,b){a.html(b())}),db("visible",function(a,b){W(a,"visible"),b()?a.show():a.hide()}),db("template",{init:function(){this.render.apply(this,arguments)},update:function(){this.render.apply(this,arguments)},render:function(a){var b=this.getTemplateUrl.apply(this,arguments);this.getTemplate(b,function(b){a.html(b),e.bindDom(a)})},isUrl:function(a){return this.urlReg.test("http://test.com"+(0===a.indexOf("/")?"":"/")+a)||this.urlReg.test(a)},getTemplateUrl:function(a,b,c){return b()||c.expression},getTemplate:function(b,c){var d=this;if(0===b.indexOf("#"))return c(a(b).html());if(this.isUrl(b)){if(this.cache[b])return c(this.cache[b]);a.ajax({url:b,success:function(a){d.cache[b]=a,c(d.cache[b])}})}},cache:{},urlReg:new RegExp("^(?:(?:https?|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:/\\S*)?$","i")}),db("attr",function(a,b){b=b(),a.attr(b||{})}),db("style",function(a,b){a.css(b()||{})}),db("css",function(a,b){b=b()||{};for(var c in b)a[b[c]?"addClass":"removeClass"](c)}),db("css-str",function(a,b){a.attr("class",b())}),db("func",function(a,b){var c=b();avril.isFunc(c)&&c(a)},function(a){return a+".bind(this)"}),db("event",{init:function(a,b){var c=b();if(c)for(var d in c)a.on(d,c[d])}}),db("link",function(a,b){a.is("img,iframe,script")?a.attr("src",b()):a.is("form")?a.attr("action",b()):a.attr("href",b())}),avril.array("click,dblclick,mousein,mouseout,change,blur,focus,keyup,keydown,submit".split(",")).each(function(a){db(a,{init:function(b,c){var d=c();d&&b.on(a,function(a){return d(a,b)})}})}),eb(function(a){var b=/\$(tryGet)\s*\(\s*([\$|\w|\'|\.|\"]+)\s*(\,\s*[\$|\w|\'|\"]+)*\s*\)/g;return b.test(a)&&(a=a.replace(b,function(a,b,c,d){return d=void 0===d?"":d,c.indexOf('"')>=0||c.indexOf("'")>=0?a:"$"+b+'("'+c+'"'+d+")"})),a}),fb("$tryGet",function(a,b){var c=this;return b=void 0===b?"":b,avril.object(c).tryGetVal(a)||avril.object(c.$root).tryGetVal(a)||b}),eb(function(a){if(t().test(a)&&!/^\d+/.test(a)){if(0==a.indexOf("$root"))return a;a.indexOf("$scope")<0&&(a="$scope."+a)}return a}),fb("$guid",function(){return"av_guid"+avril.guid().replace(/_/g,"")}),fb("$randomScope",function(){return"$root.rdm"+avril.guid().replace(/_/g,"")}),fb("$parent",function(a){var b=a?this.$el.parents(a).first():this.$el.parents(E("scope")).first();return z(b)}),fb("$setVal",function(a,b){return e.setVal(u(this.$ns,a),b),b}),fb("$avArray",function(a){return a=0===arguments.length?this.$ns:u(this.$ns,a),e.array(a,this.$el)}),fb("$index",function(){for(var a=this.$el;!a.is("["+w("each-item")+"]")&&a.length&&!a.is("body");)a=a.parent();if(a.length){var b=a.attr(w("scope")),c=a.parent().children("["+w("scope")+'="'+b+'"]'),d=a.parent().children("["+w("each-item")+'="generated"]');if(1==c.length)return d.index(a);if(c.length>1)return d.index(c.first())/c.length}return 0}),fb("$clone",function(b){return a.extend(!0,{},b)}),fb("$remoteScope",function(b,c){var c=c||"remote"+avril.guid(),d={loading:"loading",success:"success",failed:"failed"};c=e.resolveAbsNs(this.$ns,c);var f=function(a){e.setVal(c+".status",a)},g=function(a){e.setVal(c+".res",a)},h=function(){f(d.loading),a.ajax({url:b,success:function(a){f(d.success),g(a)},error:function(){f(d.failed)}})};return h(),e.setVal(c+".reload",h),c})});d.defaults={attr_pre:"av",show_error:!1,trigger_events:"change keyup",show_dev_info:!1,use_text_expression:!1,force_delay:!0},d.bindingName=function(a){return this.defaults.attr_pre+"-"+a},d.devInfo=function(a,b,c){this.defaults.show_dev_info&&a.attr(this.bindingName(b)+"-dev",c)},d.elementExists=function(a){return a.parents("html").length>0||a.is("html")},d.executeExpression=function(a,b){return c(a).call(b)},avril.mvvm=avril.Mvvm()}(window.jQuery,function(expression){with(this)try{return eval("("+expression+")")}catch(E){if(avril.Mvvm.defaults.show_error===!0)throw E;avril.Mvvm.defaults.errorHandler&&avril.Mvvm.defaults.errorHandler(E)}return""},function(){var a={};return function(b){if(a[b])return a[b];try{return a[b]=new Function("with (this){\n        try{\n            return "+b+";\n    } catch (E){\n        if(avril.Mvvm.defaults.show_error === true){\n            throw E;\n        }\n        if(avril.Mvvm.defaults.errorHandler){\n            avril.Mvvm.defaults.errorHandler(E);\n        }\n        return '';\n    \n}\n}")}catch(c){return a[b]=function(){}}}}());